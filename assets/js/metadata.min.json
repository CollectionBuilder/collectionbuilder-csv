---
# metadata for table ajax
---
{% if site.data.theme.data-child-objects == true %}
{%- assign items = site.data[site.metadata] | where_exp: 'item','item.objectid' -%}
{% else %}
{%- assign items = site.data[site.metadata] | where_exp: 'item','item.objectid and item.parentid == nil' -%}
{% endif %}
{%- assign fields = site.data.config-table | map: 'field' -%}
{ "objects": [
{%- for item in items -%}[ {% for f in fields %}{% if item[f] %}{{ item[f] | jsonify }}{% else %}""{% endif %},{% endfor %} "{{ '/items/' | relative_url }}{% if item.parentid %}{{ item.parentid }}.html#{{ item.objectid }}{% else %}{{ item.objectid }}.html{% endif %}" ]{% unless forloop.last %},{% endunless %}
{% endfor %}
] }

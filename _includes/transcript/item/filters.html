<!-- cb: _includes/transcript/item/filters.html -->

<!-- For debugging consider https://gist.github.com/alexanderadam/00f40186d2797cfb9b1dffdc78dac445 in place of...
<pre>
    site: {{ site | jsonify | escape }}
    page: {{ page | jsonify | escape }}
    layout: {{ layout | jsonify | escape }}
    content: {{ content | jsonify | escape }}
    paginator: {{ paginator | jsonify | escape }}
    site.data.filters: {{ site.data.filters | jsonify | escape }}
</pre>
-->

<div class="row my-3 sticky-top bg-white border-bottom border-left border-right d-print-none py-3 w-md-75 {{hidden}}" id="filters-search" >
    <div class="col {% unless site.data.filters %}d-none{% endunless %}">
      <select id="filters" title="Filter by Topic" aria-label="Topic filtering dropdown select option" class="filters py-1 form-select border border-primary" onchange="filterLines(this.value)">
        <option value="all" class="reset" selected="selected reset">Filter by Topic</option>
        {% assign filters = site.data.filters %}
        {% for filter in filters %}
        {% assign tag = filter.tag | slugify %}
        {%if uniqueSubjects contains tag %}<option value="{{ tag }}">{{filter.description | capitalize}}
          ({{filter.tag}})</option>{%endif%}
        {% endfor %}
      </select>

    {% if filters %}   <!-- MAM added logic 26-Sep-2024 to hide some controls if no filters are present -->
      {% assign hidden = "" %}
      {% assign bg_primary = "bg-primary" %}
    {% else %}
      {% assign hidden = "d-none" %}
      {% assign bg_primary = "" %}
    {% endif %}  

    </div>
    <div class="col">
      <div id="transcriptsearch" class="bg-lightr">
        <div class="row">
          <div class="col-md-6">
            <div class="input-group fs-5 mt-0 mt-md-0">
              <input type="text" class="form-control border border-primary py-1 {{hidden}}" placeholder="Search..." aria-label="Search"
                aria-describedby="goButton" id="quicksearch">
              <div class="input-group-append {{hidden}}">
                <button class=" rounded-right border border-primary btn btn-primary p-1" type="submit"
                  title="Search" alt="Search" id="goButton"
                  onclick="var searchval = document.getElementById('quicksearch').value; searchLines(searchval);">Go</button>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <button class="reset btn btn-sm btn-primary input-group-text float-end float-md-none mt-2 mt-md-0 {{hidden}}" onclick="vizFilter('all');">Reset Filters</button>
          </div>
        </div>
      </div>
    </div>
    <div id="filtersearch" class="col-12 d-none mt-3">
      <h5 id="linecount" class="d-none small ms-3"><span id="numberof"></span></h5>

      <select class="w-100 col-md-8 mb-2 form-select p-2 border border-primary" id="searchResults" onchange="scrollToLine(this.value);">

      </select>
    </div>

    <div id="filter-tab" class="d-none filter-tab col-4 col-lg-2 {{bg_primary}} text-center justify-content-end text-white small px-1 py-1">
      {% if filters %}
        <span id="hide-filters-text">Hide Filters &#9650;</span>
        <span id="show-filters-text">Show Filters &#9660;</span>
      {% endif %}  
    </div>

  </div>